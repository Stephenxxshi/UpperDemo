<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:controls="clr-namespace:Plant01.WpfUI.Controls"
                    xmlns:themes="clr-namespace:Plant01.WpfUI.Themes">

    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>

    <Style TargetType="{x:Type controls:PropertyItem}">
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="BorderBrush" Value="{DynamicResource {x:Static themes:DesignTokenKeys.ColorPrimaryBorder}}"/>
        <Setter Property="BorderThickness" Value="0,0,0,1"/>
        <Setter Property="Padding" Value="8,4"/>
        <Setter Property="MinHeight" Value="32"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:PropertyItem}">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="{TemplateBinding DisplayName}"
                                       VerticalAlignment="Center"
                                       Foreground="{DynamicResource {x:Static themes:DesignTokenKeys.ColorPrimaryText}}"
                                       ToolTip="{TemplateBinding Description}"
                                       Margin="0,0,8,0"
                                       TextTrimming="CharacterEllipsis"/>
                            <ContentPresenter Grid.Column="1"
                                              Content="{TemplateBinding Content}"
                                              VerticalAlignment="Center"/>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

    <Style TargetType="{x:Type controls:PropertyGrid}">
        <Setter Property="Background" Value="{DynamicResource {x:Static themes:DesignTokenKeys.ColorPrimaryBg}}"/>
        <Setter Property="BorderBrush" Value="{DynamicResource {x:Static themes:DesignTokenKeys.ColorPrimaryBorder}}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type controls:PropertyGrid}">
                    <Border Background="{TemplateBinding Background}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}"
                            CornerRadius="4">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <!-- Toolbar -->
                            <Grid Grid.Row="0" Margin="4">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <controls:AntInput x:Name="PART_SearchBar"
                                                   Placeholder="Search properties..."
                                                   Margin="0,0,4,0"/>
                                <Button Command="{x:Static controls:PropertyGrid.SortByCategoryCommand}"
                                        Content="Cat"
                                        ToolTip="Sort by Category"
                                        Margin="0,0,2,0"
                                        Visibility="{TemplateBinding ShowSortButton, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                                <Button Command="{x:Static controls:PropertyGrid.SortByNameCommand}"
                                        Content="A-Z"
                                        ToolTip="Sort by Name"
                                        Visibility="{TemplateBinding ShowSortButton, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                            </Grid>

                            <!-- Items -->
                            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                                <ItemsControl x:Name="PART_ItemsControl"
                                              Focusable="False">
                                    <ItemsControl.GroupStyle>
                                        <GroupStyle>
                                            <GroupStyle.HeaderTemplate>
                                                <DataTemplate>
                                                    <Border Background="{DynamicResource {x:Static themes:DesignTokenKeys.ColorPrimaryBgHover}}"
                                                            Padding="8,4">
                                                        <TextBlock Text="{Binding Name}"
                                                                   FontWeight="Bold"
                                                                   Foreground="{DynamicResource {x:Static themes:DesignTokenKeys.ColorPrimaryText}}"/>
                                                    </Border>
                                                </DataTemplate>
                                            </GroupStyle.HeaderTemplate>
                                        </GroupStyle>
                                    </ItemsControl.GroupStyle>
                                </ItemsControl>
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
